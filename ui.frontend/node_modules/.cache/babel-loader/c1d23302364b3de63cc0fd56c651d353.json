{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _require = require('source-map-js'),\n    SourceMapConsumer = _require.SourceMapConsumer,\n    SourceMapGenerator = _require.SourceMapGenerator;\n\nvar _require2 = require('url'),\n    fileURLToPath = _require2.fileURLToPath,\n    pathToFileURL = _require2.pathToFileURL;\n\nvar _require3 = require('path'),\n    resolve = _require3.resolve,\n    isAbsolute = _require3.isAbsolute;\n\nvar _require4 = require('nanoid/non-secure'),\n    nanoid = _require4.nanoid;\n\nvar terminalHighlight = require('./terminal-highlight');\n\nvar CssSyntaxError = require('./css-syntax-error');\n\nvar PreviousMap = require('./previous-map');\n\nvar fromOffsetCache = Symbol('fromOffsetCache');\nvar sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nvar pathAvailable = Boolean(resolve && isAbsolute);\n\nvar Input = /*#__PURE__*/function () {\n  function Input(css) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Input);\n\n    if (css === null || typeof css === 'undefined' || typeof css === 'object' && !css.toString) {\n      throw new Error(\"PostCSS received \".concat(css, \" instead of CSS string\"));\n    }\n\n    this.css = css.toString();\n\n    if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"\\uFFFE\") {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n\n    if (opts.from) {\n      if (!pathAvailable || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve(opts.from);\n      }\n    }\n\n    if (pathAvailable && sourceMapAvailable) {\n      var map = new PreviousMap(this.css, opts);\n\n      if (map.text) {\n        this.map = map;\n        var file = map.consumer().file;\n        if (!this.file && file) this.file = this.mapResolve(file);\n      }\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>';\n    }\n\n    if (this.map) this.map.file = this.from;\n  }\n\n  _createClass(Input, [{\n    key: \"fromOffset\",\n    value: function fromOffset(offset) {\n      var lastLine, lineToIndex;\n\n      if (!this[fromOffsetCache]) {\n        var lines = this.css.split('\\n');\n        lineToIndex = new Array(lines.length);\n        var prevIndex = 0;\n\n        for (var i = 0, l = lines.length; i < l; i++) {\n          lineToIndex[i] = prevIndex;\n          prevIndex += lines[i].length + 1;\n        }\n\n        this[fromOffsetCache] = lineToIndex;\n      } else {\n        lineToIndex = this[fromOffsetCache];\n      }\n\n      lastLine = lineToIndex[lineToIndex.length - 1];\n      var min = 0;\n\n      if (offset >= lastLine) {\n        min = lineToIndex.length - 1;\n      } else {\n        var max = lineToIndex.length - 2;\n        var mid;\n\n        while (min < max) {\n          mid = min + (max - min >> 1);\n\n          if (offset < lineToIndex[mid]) {\n            max = mid - 1;\n          } else if (offset >= lineToIndex[mid + 1]) {\n            min = mid + 1;\n          } else {\n            min = mid;\n            break;\n          }\n        }\n      }\n\n      return {\n        line: min + 1,\n        col: offset - lineToIndex[min] + 1\n      };\n    }\n  }, {\n    key: \"error\",\n    value: function error(message, line, column) {\n      var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var result, endLine, endColumn;\n\n      if (line && typeof line === 'object') {\n        var start = line;\n        var end = column;\n\n        if (typeof line.offset === 'number') {\n          var pos = this.fromOffset(start.offset);\n          line = pos.line;\n          column = pos.col;\n        } else {\n          line = start.line;\n          column = start.column;\n        }\n\n        if (typeof end.offset === 'number') {\n          var _pos = this.fromOffset(end.offset);\n\n          endLine = _pos.line;\n          endColumn = _pos.col;\n        } else {\n          endLine = end.line;\n          endColumn = end.column;\n        }\n      } else if (!column) {\n        var _pos2 = this.fromOffset(line);\n\n        line = _pos2.line;\n        column = _pos2.col;\n      }\n\n      var origin = this.origin(line, column, endLine, endColumn);\n\n      if (origin) {\n        result = new CssSyntaxError(message, origin.endLine === undefined ? origin.line : {\n          line: origin.line,\n          column: origin.column\n        }, origin.endLine === undefined ? origin.column : {\n          line: origin.endLine,\n          column: origin.endColumn\n        }, origin.source, origin.file, opts.plugin);\n      } else {\n        result = new CssSyntaxError(message, endLine === undefined ? line : {\n          line: line,\n          column: column\n        }, endLine === undefined ? column : {\n          line: endLine,\n          column: endColumn\n        }, this.css, this.file, opts.plugin);\n      }\n\n      result.input = {\n        line: line,\n        column: column,\n        endLine: endLine,\n        endColumn: endColumn,\n        source: this.css\n      };\n\n      if (this.file) {\n        if (pathToFileURL) {\n          result.input.url = pathToFileURL(this.file).toString();\n        }\n\n        result.input.file = this.file;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"origin\",\n    value: function origin(line, column, endLine, endColumn) {\n      if (!this.map) return false;\n      var consumer = this.map.consumer();\n      var from = consumer.originalPositionFor({\n        line: line,\n        column: column\n      });\n      if (!from.source) return false;\n      var to;\n\n      if (typeof endLine === 'number') {\n        to = consumer.originalPositionFor({\n          line: endLine,\n          column: endColumn\n        });\n      }\n\n      var fromUrl;\n\n      if (isAbsolute(from.source)) {\n        fromUrl = pathToFileURL(from.source);\n      } else {\n        fromUrl = new URL(from.source, this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile));\n      }\n\n      var result = {\n        url: fromUrl.toString(),\n        line: from.line,\n        column: from.column,\n        endLine: to && to.line,\n        endColumn: to && to.column\n      };\n\n      if (fromUrl.protocol === 'file:') {\n        if (fileURLToPath) {\n          result.file = fileURLToPath(fromUrl);\n        } else {\n          /* c8 ignore next 2 */\n          throw new Error(\"file: protocol is not available in this PostCSS build\");\n        }\n      }\n\n      var source = consumer.sourceContentFor(from.source);\n      if (source) result.source = source;\n      return result;\n    }\n  }, {\n    key: \"mapResolve\",\n    value: function mapResolve(file) {\n      if (/^\\w+:\\/\\//.test(file)) {\n        return file;\n      }\n\n      return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file);\n    }\n  }, {\n    key: \"from\",\n    get: function get() {\n      return this.file || this.id;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var json = {};\n\n      for (var _i = 0, _arr = ['hasBOM', 'css', 'file', 'id']; _i < _arr.length; _i++) {\n        var name = _arr[_i];\n\n        if (this[name] != null) {\n          json[name] = this[name];\n        }\n      }\n\n      if (this.map) {\n        json.map = _objectSpread({}, this.map);\n\n        if (json.map.consumerCache) {\n          json.map.consumerCache = undefined;\n        }\n      }\n\n      return json;\n    }\n  }]);\n\n  return Input;\n}();\n\nmodule.exports = Input;\nInput.default = Input;\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input);\n}","map":{"version":3,"sources":["C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/postcss/lib/input.js"],"names":["require","SourceMapConsumer","SourceMapGenerator","fileURLToPath","pathToFileURL","resolve","isAbsolute","nanoid","terminalHighlight","CssSyntaxError","PreviousMap","fromOffsetCache","Symbol","sourceMapAvailable","Boolean","pathAvailable","Input","css","opts","toString","Error","hasBOM","slice","from","test","file","map","text","consumer","mapResolve","id","offset","lastLine","lineToIndex","lines","split","Array","length","prevIndex","i","l","min","max","mid","line","col","message","column","result","endLine","endColumn","start","end","pos","fromOffset","origin","undefined","source","plugin","input","url","originalPositionFor","to","fromUrl","URL","sourceRoot","mapFile","protocol","sourceContentFor","root","json","name","consumerCache","module","exports","default","registerInput"],"mappings":"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","sourcesContent":["'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { fileURLToPath, pathToFileURL } = require('url')\nlet { resolve, isAbsolute } = require('path')\nlet { nanoid } = require('nanoid/non-secure')\n\nlet terminalHighlight = require('./terminal-highlight')\nlet CssSyntaxError = require('./css-syntax-error')\nlet PreviousMap = require('./previous-map')\n\nlet fromOffsetCache = Symbol('fromOffsetCache')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(resolve && isAbsolute)\n\nclass Input {\n  constructor(css, opts = {}) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`)\n    }\n\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (\n        !pathAvailable ||\n        /^\\w+:\\/\\//.test(opts.from) ||\n        isAbsolute(opts.from)\n      ) {\n        this.file = opts.from\n      } else {\n        this.file = resolve(opts.from)\n      }\n    }\n\n    if (pathAvailable && sourceMapAvailable) {\n      let map = new PreviousMap(this.css, opts)\n      if (map.text) {\n        this.map = map\n        let file = map.consumer().file\n        if (!this.file && file) this.file = this.mapResolve(file)\n      }\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  fromOffset(offset) {\n    let lastLine, lineToIndex\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split('\\n')\n      lineToIndex = new Array(lines.length)\n      let prevIndex = 0\n\n      for (let i = 0, l = lines.length; i < l; i++) {\n        lineToIndex[i] = prevIndex\n        prevIndex += lines[i].length + 1\n      }\n\n      this[fromOffsetCache] = lineToIndex\n    } else {\n      lineToIndex = this[fromOffsetCache]\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1]\n\n    let min = 0\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1\n    } else {\n      let max = lineToIndex.length - 2\n      let mid\n      while (min < max) {\n        mid = min + ((max - min) >> 1)\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1\n        } else {\n          min = mid\n          break\n        }\n      }\n    }\n    return {\n      line: min + 1,\n      col: offset - lineToIndex[min] + 1\n    }\n  }\n\n  error(message, line, column, opts = {}) {\n    let result, endLine, endColumn\n\n    if (line && typeof line === 'object') {\n      let start = line\n      let end = column\n      if (typeof line.offset === 'number') {\n        let pos = this.fromOffset(start.offset)\n        line = pos.line\n        column = pos.col\n      } else {\n        line = start.line\n        column = start.column\n      }\n      if (typeof end.offset === 'number') {\n        let pos = this.fromOffset(end.offset)\n        endLine = pos.line\n        endColumn = pos.col\n      } else {\n        endLine = end.line\n        endColumn = end.column\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line)\n      line = pos.line\n      column = pos.col\n    }\n\n    let origin = this.origin(line, column, endLine, endColumn)\n    if (origin) {\n      result = new CssSyntaxError(\n        message,\n        origin.endLine === undefined\n          ? origin.line\n          : { line: origin.line, column: origin.column },\n        origin.endLine === undefined\n          ? origin.column\n          : { line: origin.endLine, column: origin.endColumn },\n        origin.source,\n        origin.file,\n        opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message,\n        endLine === undefined ? line : { line, column },\n        endLine === undefined ? column : { line: endLine, column: endColumn },\n        this.css,\n        this.file,\n        opts.plugin\n      )\n    }\n\n    result.input = { line, column, endLine, endColumn, source: this.css }\n    if (this.file) {\n      if (pathToFileURL) {\n        result.input.url = pathToFileURL(this.file).toString()\n      }\n      result.input.file = this.file\n    }\n\n    return result\n  }\n\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ line, column })\n    if (!from.source) return false\n\n    let to\n    if (typeof endLine === 'number') {\n      to = consumer.originalPositionFor({ line: endLine, column: endColumn })\n    }\n\n    let fromUrl\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source)\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n      )\n    }\n\n    let result = {\n      url: fromUrl.toString(),\n      line: from.line,\n      column: from.column,\n      endLine: to && to.line,\n      endColumn: to && to.column\n    }\n\n    if (fromUrl.protocol === 'file:') {\n      if (fileURLToPath) {\n        result.file = fileURLToPath(fromUrl)\n      } else {\n        /* c8 ignore next 2 */\n        throw new Error(`file: protocol is not available in this PostCSS build`)\n      }\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file)\n  }\n\n  get from() {\n    return this.file || this.id\n  }\n\n  toJSON() {\n    let json = {}\n    for (let name of ['hasBOM', 'css', 'file', 'id']) {\n      if (this[name] != null) {\n        json[name] = this[name]\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map }\n      if (json.map.consumerCache) {\n        json.map.consumerCache = undefined\n      }\n    }\n    return json\n  }\n}\n\nmodule.exports = Input\nInput.default = Input\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input)\n}\n"]},"metadata":{},"sourceType":"script"}