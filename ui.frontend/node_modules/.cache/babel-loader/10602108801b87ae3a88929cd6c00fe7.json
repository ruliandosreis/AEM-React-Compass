{"ast":null,"code":"'use strict';\n\nvar _createForOfIteratorHelper = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _require = require('source-map-js'),\n    SourceMapConsumer = _require.SourceMapConsumer,\n    SourceMapGenerator = _require.SourceMapGenerator;\n\nvar _require2 = require('path'),\n    dirname = _require2.dirname,\n    resolve = _require2.resolve,\n    relative = _require2.relative,\n    sep = _require2.sep;\n\nvar _require3 = require('url'),\n    pathToFileURL = _require3.pathToFileURL;\n\nvar Input = require('./input');\n\nvar sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nvar pathAvailable = Boolean(dirname && resolve && relative && sep);\n\nvar MapGenerator = /*#__PURE__*/function () {\n  function MapGenerator(stringify, root, opts, cssString) {\n    _classCallCheck(this, MapGenerator);\n\n    this.stringify = stringify;\n    this.mapOpts = opts.map || {};\n    this.root = root;\n    this.opts = opts;\n    this.css = cssString;\n  }\n\n  _createClass(MapGenerator, [{\n    key: \"isMap\",\n    value: function isMap() {\n      if (typeof this.opts.map !== 'undefined') {\n        return !!this.opts.map;\n      }\n\n      return this.previous().length > 0;\n    }\n  }, {\n    key: \"previous\",\n    value: function previous() {\n      var _this = this;\n\n      if (!this.previousMaps) {\n        this.previousMaps = [];\n\n        if (this.root) {\n          this.root.walk(function (node) {\n            if (node.source && node.source.input.map) {\n              var map = node.source.input.map;\n\n              if (!_this.previousMaps.includes(map)) {\n                _this.previousMaps.push(map);\n              }\n            }\n          });\n        } else {\n          var input = new Input(this.css, this.opts);\n          if (input.map) this.previousMaps.push(input.map);\n        }\n      }\n\n      return this.previousMaps;\n    }\n  }, {\n    key: \"isInline\",\n    value: function isInline() {\n      if (typeof this.mapOpts.inline !== 'undefined') {\n        return this.mapOpts.inline;\n      }\n\n      var annotation = this.mapOpts.annotation;\n\n      if (typeof annotation !== 'undefined' && annotation !== true) {\n        return false;\n      }\n\n      if (this.previous().length) {\n        return this.previous().some(function (i) {\n          return i.inline;\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"isSourcesContent\",\n    value: function isSourcesContent() {\n      if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n        return this.mapOpts.sourcesContent;\n      }\n\n      if (this.previous().length) {\n        return this.previous().some(function (i) {\n          return i.withContent();\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"clearAnnotation\",\n    value: function clearAnnotation() {\n      if (this.mapOpts.annotation === false) return;\n\n      if (this.root) {\n        var node;\n\n        for (var i = this.root.nodes.length - 1; i >= 0; i--) {\n          node = this.root.nodes[i];\n          if (node.type !== 'comment') continue;\n\n          if (node.text.indexOf('# sourceMappingURL=') === 0) {\n            this.root.removeChild(i);\n          }\n        }\n      } else if (this.css) {\n        this.css = this.css.replace(/(\\n)?\\/\\*#[\\S\\s]*?\\*\\/$/gm, '');\n      }\n    }\n  }, {\n    key: \"setSourcesContent\",\n    value: function setSourcesContent() {\n      var _this2 = this;\n\n      var already = {};\n\n      if (this.root) {\n        this.root.walk(function (node) {\n          if (node.source) {\n            var from = node.source.input.from;\n\n            if (from && !already[from]) {\n              already[from] = true;\n\n              _this2.map.setSourceContent(_this2.toUrl(_this2.path(from)), node.source.input.css);\n            }\n          }\n        });\n      } else if (this.css) {\n        var from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : '<no source>';\n        this.map.setSourceContent(from, this.css);\n      }\n    }\n  }, {\n    key: \"applyPrevMaps\",\n    value: function applyPrevMaps() {\n      var _iterator = _createForOfIteratorHelper(this.previous()),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var prev = _step.value;\n          var from = this.toUrl(this.path(prev.file));\n          var root = prev.root || dirname(prev.file);\n          var map = void 0;\n\n          if (this.mapOpts.sourcesContent === false) {\n            map = new SourceMapConsumer(prev.text);\n\n            if (map.sourcesContent) {\n              map.sourcesContent = map.sourcesContent.map(function () {\n                return null;\n              });\n            }\n          } else {\n            map = prev.consumer();\n          }\n\n          this.map.applySourceMap(map, from, this.toUrl(this.path(root)));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"isAnnotation\",\n    value: function isAnnotation() {\n      if (this.isInline()) {\n        return true;\n      }\n\n      if (typeof this.mapOpts.annotation !== 'undefined') {\n        return this.mapOpts.annotation;\n      }\n\n      if (this.previous().length) {\n        return this.previous().some(function (i) {\n          return i.annotation;\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"toBase64\",\n    value: function toBase64(str) {\n      if (Buffer) {\n        return Buffer.from(str).toString('base64');\n      } else {\n        return window.btoa(unescape(encodeURIComponent(str)));\n      }\n    }\n  }, {\n    key: \"addAnnotation\",\n    value: function addAnnotation() {\n      var content;\n\n      if (this.isInline()) {\n        content = 'data:application/json;base64,' + this.toBase64(this.map.toString());\n      } else if (typeof this.mapOpts.annotation === 'string') {\n        content = this.mapOpts.annotation;\n      } else if (typeof this.mapOpts.annotation === 'function') {\n        content = this.mapOpts.annotation(this.opts.to, this.root);\n      } else {\n        content = this.outputFile() + '.map';\n      }\n\n      var eol = '\\n';\n      if (this.css.includes('\\r\\n')) eol = '\\r\\n';\n      this.css += eol + '/*# sourceMappingURL=' + content + ' */';\n    }\n  }, {\n    key: \"outputFile\",\n    value: function outputFile() {\n      if (this.opts.to) {\n        return this.path(this.opts.to);\n      } else if (this.opts.from) {\n        return this.path(this.opts.from);\n      } else {\n        return 'to.css';\n      }\n    }\n  }, {\n    key: \"generateMap\",\n    value: function generateMap() {\n      if (this.root) {\n        this.generateString();\n      } else if (this.previous().length === 1) {\n        var prev = this.previous()[0].consumer();\n        prev.file = this.outputFile();\n        this.map = SourceMapGenerator.fromSourceMap(prev);\n      } else {\n        this.map = new SourceMapGenerator({\n          file: this.outputFile()\n        });\n        this.map.addMapping({\n          source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : '<no source>',\n          generated: {\n            line: 1,\n            column: 0\n          },\n          original: {\n            line: 1,\n            column: 0\n          }\n        });\n      }\n\n      if (this.isSourcesContent()) this.setSourcesContent();\n      if (this.root && this.previous().length > 0) this.applyPrevMaps();\n      if (this.isAnnotation()) this.addAnnotation();\n\n      if (this.isInline()) {\n        return [this.css];\n      } else {\n        return [this.css, this.map];\n      }\n    }\n  }, {\n    key: \"path\",\n    value: function path(file) {\n      if (file.indexOf('<') === 0) return file;\n      if (/^\\w+:\\/\\//.test(file)) return file;\n      if (this.mapOpts.absolute) return file;\n      var from = this.opts.to ? dirname(this.opts.to) : '.';\n\n      if (typeof this.mapOpts.annotation === 'string') {\n        from = dirname(resolve(from, this.mapOpts.annotation));\n      }\n\n      file = relative(from, file);\n      return file;\n    }\n  }, {\n    key: \"toUrl\",\n    value: function toUrl(path) {\n      if (sep === '\\\\') {\n        path = path.replace(/\\\\/g, '/');\n      }\n\n      return encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n    }\n  }, {\n    key: \"sourcePath\",\n    value: function sourcePath(node) {\n      if (this.mapOpts.from) {\n        return this.toUrl(this.mapOpts.from);\n      } else if (this.mapOpts.absolute) {\n        if (pathToFileURL) {\n          return pathToFileURL(node.source.input.from).toString();\n        } else {\n          throw new Error('`map.absolute` option is not available in this PostCSS build');\n        }\n      } else {\n        return this.toUrl(this.path(node.source.input.from));\n      }\n    }\n  }, {\n    key: \"generateString\",\n    value: function generateString() {\n      var _this3 = this;\n\n      this.css = '';\n      this.map = new SourceMapGenerator({\n        file: this.outputFile()\n      });\n      var line = 1;\n      var column = 1;\n      var noSource = '<no source>';\n      var mapping = {\n        source: '',\n        generated: {\n          line: 0,\n          column: 0\n        },\n        original: {\n          line: 0,\n          column: 0\n        }\n      };\n      var lines, last;\n      this.stringify(this.root, function (str, node, type) {\n        _this3.css += str;\n\n        if (node && type !== 'end') {\n          mapping.generated.line = line;\n          mapping.generated.column = column - 1;\n\n          if (node.source && node.source.start) {\n            mapping.source = _this3.sourcePath(node);\n            mapping.original.line = node.source.start.line;\n            mapping.original.column = node.source.start.column - 1;\n\n            _this3.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n\n            _this3.map.addMapping(mapping);\n          }\n        }\n\n        lines = str.match(/\\n/g);\n\n        if (lines) {\n          line += lines.length;\n          last = str.lastIndexOf('\\n');\n          column = str.length - last;\n        } else {\n          column += str.length;\n        }\n\n        if (node && type !== 'start') {\n          var p = node.parent || {\n            raws: {}\n          };\n\n          if (node.type !== 'decl' || node !== p.last || p.raws.semicolon) {\n            if (node.source && node.source.end) {\n              mapping.source = _this3.sourcePath(node);\n              mapping.original.line = node.source.end.line;\n              mapping.original.column = node.source.end.column - 1;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 2;\n\n              _this3.map.addMapping(mapping);\n            } else {\n              mapping.source = noSource;\n              mapping.original.line = 1;\n              mapping.original.column = 0;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 1;\n\n              _this3.map.addMapping(mapping);\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"generate\",\n    value: function generate() {\n      this.clearAnnotation();\n\n      if (pathAvailable && sourceMapAvailable && this.isMap()) {\n        return this.generateMap();\n      } else {\n        var result = '';\n        this.stringify(this.root, function (i) {\n          result += i;\n        });\n        return [result];\n      }\n    }\n  }]);\n\n  return MapGenerator;\n}();\n\nmodule.exports = MapGenerator;","map":{"version":3,"sources":["C:/Users/Rulian/Documents/AEM/Projetos/reactcompass/ui.frontend/node_modules/postcss/lib/map-generator.js"],"names":["require","SourceMapConsumer","SourceMapGenerator","dirname","resolve","relative","sep","pathToFileURL","Input","sourceMapAvailable","Boolean","pathAvailable","MapGenerator","stringify","root","opts","cssString","mapOpts","map","css","previous","length","previousMaps","walk","node","source","input","includes","push","inline","annotation","some","i","sourcesContent","withContent","nodes","type","text","indexOf","removeChild","replace","already","from","setSourceContent","toUrl","path","prev","file","consumer","applySourceMap","isInline","str","Buffer","toString","window","btoa","unescape","encodeURIComponent","content","toBase64","to","outputFile","eol","generateString","fromSourceMap","addMapping","generated","line","column","original","isSourcesContent","setSourcesContent","applyPrevMaps","isAnnotation","addAnnotation","test","absolute","encodeURI","Error","noSource","mapping","lines","last","start","sourcePath","match","lastIndexOf","p","parent","raws","semicolon","end","clearAnnotation","isMap","generateMap","result","module","exports"],"mappings":"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","sourcesContent":["'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { dirname, resolve, relative, sep } = require('path')\nlet { pathToFileURL } = require('url')\n\nlet Input = require('./input')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(dirname && resolve && relative && sep)\n\nclass MapGenerator {\n  constructor(stringify, root, opts, cssString) {\n    this.stringify = stringify\n    this.mapOpts = opts.map || {}\n    this.root = root\n    this.opts = opts\n    this.css = cssString\n  }\n\n  isMap() {\n    if (typeof this.opts.map !== 'undefined') {\n      return !!this.opts.map\n    }\n    return this.previous().length > 0\n  }\n\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = []\n      if (this.root) {\n        this.root.walk(node => {\n          if (node.source && node.source.input.map) {\n            let map = node.source.input.map\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map)\n            }\n          }\n        })\n      } else {\n        let input = new Input(this.css, this.opts)\n        if (input.map) this.previousMaps.push(input.map)\n      }\n    }\n\n    return this.previousMaps\n  }\n\n  isInline() {\n    if (typeof this.mapOpts.inline !== 'undefined') {\n      return this.mapOpts.inline\n    }\n\n    let annotation = this.mapOpts.annotation\n    if (typeof annotation !== 'undefined' && annotation !== true) {\n      return false\n    }\n\n    if (this.previous().length) {\n      return this.previous().some(i => i.inline)\n    }\n    return true\n  }\n\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n      return this.mapOpts.sourcesContent\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.withContent())\n    }\n    return true\n  }\n\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return\n\n    if (this.root) {\n      let node\n      for (let i = this.root.nodes.length - 1; i >= 0; i--) {\n        node = this.root.nodes[i]\n        if (node.type !== 'comment') continue\n        if (node.text.indexOf('# sourceMappingURL=') === 0) {\n          this.root.removeChild(i)\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/(\\n)?\\/\\*#[\\S\\s]*?\\*\\/$/gm, '')\n    }\n  }\n\n  setSourcesContent() {\n    let already = {}\n    if (this.root) {\n      this.root.walk(node => {\n        if (node.source) {\n          let from = node.source.input.from\n          if (from && !already[from]) {\n            already[from] = true\n            this.map.setSourceContent(\n              this.toUrl(this.path(from)),\n              node.source.input.css\n            )\n          }\n        }\n      })\n    } else if (this.css) {\n      let from = this.opts.from\n        ? this.toUrl(this.path(this.opts.from))\n        : '<no source>'\n      this.map.setSourceContent(from, this.css)\n    }\n  }\n\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file))\n      let root = prev.root || dirname(prev.file)\n      let map\n\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text)\n        if (map.sourcesContent) {\n          map.sourcesContent = map.sourcesContent.map(() => null)\n        }\n      } else {\n        map = prev.consumer()\n      }\n\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root)))\n    }\n  }\n\n  isAnnotation() {\n    if (this.isInline()) {\n      return true\n    }\n    if (typeof this.mapOpts.annotation !== 'undefined') {\n      return this.mapOpts.annotation\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.annotation)\n    }\n    return true\n  }\n\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString('base64')\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)))\n    }\n  }\n\n  addAnnotation() {\n    let content\n\n    if (this.isInline()) {\n      content =\n        'data:application/json;base64,' + this.toBase64(this.map.toString())\n    } else if (typeof this.mapOpts.annotation === 'string') {\n      content = this.mapOpts.annotation\n    } else if (typeof this.mapOpts.annotation === 'function') {\n      content = this.mapOpts.annotation(this.opts.to, this.root)\n    } else {\n      content = this.outputFile() + '.map'\n    }\n    let eol = '\\n'\n    if (this.css.includes('\\r\\n')) eol = '\\r\\n'\n\n    this.css += eol + '/*# sourceMappingURL=' + content + ' */'\n  }\n\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to)\n    } else if (this.opts.from) {\n      return this.path(this.opts.from)\n    } else {\n      return 'to.css'\n    }\n  }\n\n  generateMap() {\n    if (this.root) {\n      this.generateString()\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer()\n      prev.file = this.outputFile()\n      this.map = SourceMapGenerator.fromSourceMap(prev)\n    } else {\n      this.map = new SourceMapGenerator({ file: this.outputFile() })\n      this.map.addMapping({\n        source: this.opts.from\n          ? this.toUrl(this.path(this.opts.from))\n          : '<no source>',\n        generated: { line: 1, column: 0 },\n        original: { line: 1, column: 0 }\n      })\n    }\n\n    if (this.isSourcesContent()) this.setSourcesContent()\n    if (this.root && this.previous().length > 0) this.applyPrevMaps()\n    if (this.isAnnotation()) this.addAnnotation()\n\n    if (this.isInline()) {\n      return [this.css]\n    } else {\n      return [this.css, this.map]\n    }\n  }\n\n  path(file) {\n    if (file.indexOf('<') === 0) return file\n    if (/^\\w+:\\/\\//.test(file)) return file\n    if (this.mapOpts.absolute) return file\n\n    let from = this.opts.to ? dirname(this.opts.to) : '.'\n\n    if (typeof this.mapOpts.annotation === 'string') {\n      from = dirname(resolve(from, this.mapOpts.annotation))\n    }\n\n    file = relative(from, file)\n    return file\n  }\n\n  toUrl(path) {\n    if (sep === '\\\\') {\n      path = path.replace(/\\\\/g, '/')\n    }\n    return encodeURI(path).replace(/[#?]/g, encodeURIComponent)\n  }\n\n  sourcePath(node) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from)\n    } else if (this.mapOpts.absolute) {\n      if (pathToFileURL) {\n        return pathToFileURL(node.source.input.from).toString()\n      } else {\n        throw new Error(\n          '`map.absolute` option is not available in this PostCSS build'\n        )\n      }\n    } else {\n      return this.toUrl(this.path(node.source.input.from))\n    }\n  }\n\n  generateString() {\n    this.css = ''\n    this.map = new SourceMapGenerator({ file: this.outputFile() })\n\n    let line = 1\n    let column = 1\n\n    let noSource = '<no source>'\n    let mapping = {\n      source: '',\n      generated: { line: 0, column: 0 },\n      original: { line: 0, column: 0 }\n    }\n\n    let lines, last\n    this.stringify(this.root, (str, node, type) => {\n      this.css += str\n\n      if (node && type !== 'end') {\n        mapping.generated.line = line\n        mapping.generated.column = column - 1\n        if (node.source && node.source.start) {\n          mapping.source = this.sourcePath(node)\n          mapping.original.line = node.source.start.line\n          mapping.original.column = node.source.start.column - 1\n          this.map.addMapping(mapping)\n        } else {\n          mapping.source = noSource\n          mapping.original.line = 1\n          mapping.original.column = 0\n          this.map.addMapping(mapping)\n        }\n      }\n\n      lines = str.match(/\\n/g)\n      if (lines) {\n        line += lines.length\n        last = str.lastIndexOf('\\n')\n        column = str.length - last\n      } else {\n        column += str.length\n      }\n\n      if (node && type !== 'start') {\n        let p = node.parent || { raws: {} }\n        if (node.type !== 'decl' || node !== p.last || p.raws.semicolon) {\n          if (node.source && node.source.end) {\n            mapping.source = this.sourcePath(node)\n            mapping.original.line = node.source.end.line\n            mapping.original.column = node.source.end.column - 1\n            mapping.generated.line = line\n            mapping.generated.column = column - 2\n            this.map.addMapping(mapping)\n          } else {\n            mapping.source = noSource\n            mapping.original.line = 1\n            mapping.original.column = 0\n            mapping.generated.line = line\n            mapping.generated.column = column - 1\n            this.map.addMapping(mapping)\n          }\n        }\n      }\n    })\n  }\n\n  generate() {\n    this.clearAnnotation()\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap()\n    } else {\n      let result = ''\n      this.stringify(this.root, i => {\n        result += i\n      })\n      return [result]\n    }\n  }\n}\n\nmodule.exports = MapGenerator\n"]},"metadata":{},"sourceType":"script"}